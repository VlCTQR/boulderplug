# Traceability matrix API
## Products endpoint
| Test Name                                                | Request Type | Request                                              | Body                                                                                                                                                                                                                                                                                                                                | Expected Response                                                         | Actual Response                                                           | Result |
|----------------------------------------------------------|--------------|------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|---------------------------------------------------------------------------|--------|
| Get all products                                         | GET          | /products                                            | None                                                                                                                                                                                                                                                                                                                                | 200 OK, List of products                                                  | 200 OK, List of products                                                  | Pass   |
| Filter products by brand                                 | GET          | /products?brand=Scarpa                               | None                                                                                                                                                                                                                                                                                                                                | 200 OK, List of filtered products based on brand                          | 200 OK, List of filtered products based on brand                          | Pass   |
| Filter products by multiple filters                      | GET          | /products?brand=Scarpa,Mad%20Rock&level=Intermediate | None                                                                                                                                                                                                                                                                                                                                | 200 OK, List of filtered products based on brand and level                | 200 OK, List of filtered products based on brand and level                | Pass   |
| Filter products by colors                                | GET          | /products?colors=blue,orange                         | None                                                                                                                                                                                                                                                                                                                                | 200 OK, List of filtered products based on colors                         | 200 OK, List of filtered products based on colors                         | Pass   |
| Search for products by term 'shoe'                       | GET          | /products?search=shoe                                | None                                                                                                                                                                                                                                                                                                                                | 200 OK, List of products with 'shoe' in the description                   | 200 OK, List of products with 'shoe' in the description                   | Pass   |
| Search for products by brand 'scarpa'                    | GET          | /products?search=scarpa                              | None                                                                                                                                                                                                                                                                                                                                | 200 OK, List of products with 'scarpa' in the name, description, or brand | 200 OK, List of products with 'scarpa' in the name, description, or brand | Pass   |
| Get product by ID                                        | GET          | /products/1                                          | None                                                                                                                                                                                                                                                                                                                                | 200 OK, Product details                                                   | 200 OK, Product details                                                   | Pass   |
| Get non-existent product by ID                           | GET          | /products/100                                        | None                                                                                                                                                                                                                                                                                                                                | 404 Not Found, "Product not found"                                        | 404 Not Found, "Product not found"                                        | Pass   |
| Get product filter options                               | GET          | /products/options                                    | None                                                                                                                                                                                                                                                                                                                                | 200 OK, List of filter options                                            | 200 OK, List of filter options                                            | Pass   |
| Place a valid bid                                        | POST         | /products/2/bids                                     | { "bid": 200 }                                                                                                                                                                                                                                                                                                                      | 201 Created, Bid placed successfully                                      | 201 Created, Bid placed successfully                                      | Pass   |
| Place a bid lower than current bid                       | POST         | /products/2/bids                                     | { "bid": 10 }                                                                                                                                                                                                                                                                                                                       | 400 Bad Request, "Bid must be higher than current bid"                    | 400 Bad Request, "Bid must be higher than current bid"                    | Pass   |
| Bid on closed auction                                    | POST         | /products/1/bids                                     | { "bid": 200 }                                                                                                                                                                                                                                                                                                                      | 400 Bad Request, "Bidding is closed"                                      | 400 Bad Request, "Bidding is closed"                                      | Pass   |
| Bid on non-existent product                              | POST         | /products/0/bids                                     | { "bid": 200 }                                                                                                                                                                                                                                                                                                                      | 404 Not Found, "Product not found"                                        | 404 Not Found, "Product not found"                                        | Pass   |
| Bid with invalid token                                   | POST         | /products/2/bids                                     | { "bid": 200 }, Authorization: Bearer "Balls"                                                                                                                                                                                                                                                                                       | 400 Bad Request, "Token does not contain user and or email"               | 400 Bad Request, "Token does not contain user and or email"               | Pass   |
| Bid without authorization header                         | POST         | /products/2/bids                                     | { "bid": 200 }                                                                                                                                                                                                                                                                                                                      | 401 Unauthorized, "Authorization header is missing"                       | 401 Unauthorized, "Authorization header is missing"                       | Pass   |
| Get list of bids from a product                          | GET          | /products/2/bids                                     | None                                                                                                                                                                                                                                                                                                                                | 200 OK, List of bids for product, first bid placed by "Jan"               | 200 OK, List of bids for product, first bid placed by "Jan"               | Pass   |
| Add a new valid product                                  | POST         | /products                                            | { "name": "New Climbing Shoe", "description": "High-performance shoe for experienced climbers.", "brand": "Scarpa", "level": "Advanced", "closing": "Velcro", "toepatch": true, "colors": ["red", "blue"], "images": ["https://example.com/image1.jpg", "https://example.com/image2.jpg"], "dateOfSale": "2024-10-01T12:00:00Z" }   | 201 Created, Product added successfully                                   | 201 Created, Product added successfully                                   | Pass   |
| Add a new product with not predefined brand              | POST         | /products                                            | { "name": "New Climbing Shoe", "description": "High-performance shoe for experienced climbers.", "brand": "NewBrand", "level": "Advanced", "closing": "Velcro", "toepatch": true, "colors": ["red", "blue"], "images": ["https://example.com/image1.jpg", "https://example.com/image2.jpg"], "dateOfSale": "2024-10-01T12:00:00Z" } | 201 Created, Product added successfully                                   | 201 Created, Product added successfully                                   | Pass   |
| Attempt to add product missing required fields           | POST         | /products                                            | { "brand": "Scarpa", "level": "Advanced", "closing": "Velcro", "toepatch": true, "colors": ["red", "blue"], "images": ["https://example.com/image1.jpg", "https://example.com/image2.jpg"], "dateOfSale": "2024-10-01T12:00:00Z" }                                                                                                  | 400 Bad Request, "Missing required fields"                                | 400 Bad Request, "Missing required fields"                                | Pass   |
| Attempt to add product with invalid data types           | POST         | /products                                            | { "name": "New Climbing Shoe", "description": "High-performance shoe for experienced climbers.", "brand": "Scarpa", "level": true, "closing": "Velcro", "toepatch": true, "colors": ["red", "blue"], "images": "https://example.com/image1.jpg", "dateOfSale": "2024-10-01T12:00:00Z" }                                             | 400 Bad Request, "Invalid data types given"                               | 400 Bad Request, "Invalid data types given"                               | Pass   |
| Post new product with admin token but invalid dateOfSale | POST         | /products                                            | { "name": "New Climbing Shoe", "description": "High-performance shoe for experienced climbers.", "brand": "Scarpa", "level": "Advanced", "closing": "Velcro", "toepatch": true, "colors": ["red", "blue"], "images": ["https://example.com/image1.jpg", "https://example.com/image2.jpg"], "dateOfSale": "202-10-01T12:00:00Z"}     | 400 Invalid dateOfSale                                                    | 400 Invalid dateOfSale                                                    | Pass   |
| Post new product with normal user token                  | POST         | /products                                            | { "name": "New Climbing Shoe", "description": "High-performance shoe for experienced climbers.", "brand": "Scarpa", "level": "Advanced", "closing": "Velcro", "toepatch": true, "colors": ["red", "blue"], "images": ["https://example.com/image1.jpg", "https://example.com/image2.jpg"], "dateOfSale": "2024-10-01T12:00:00Z"}    | 401 Unauthorized                                                          | 401 Unauthorized                                                          | Pass   |
| Delete product with admin token                          | DELETE       | /products/{{productId}}                              | None                                                                                                                                                                                                                                                                                                                                | 200                                                                       | 200                                                                       | Pass   |
| Delete product with normal user token                    | DELETE       | /products/{{productId}}                              | None                                                                                                                                                                                                                                                                                                                                | 401 Unauthorized                                                          | 401 Unauthorized                                                          | Pass   |
| Delete product that does not exist                       | DELETE       | /products/{{productId}}                              | None                                                                                                                                                                                                                                                                                                                                | 404 Product not found                                                     | 404 Product not found                                                     | Pass   |
| Update product with admin token                          | PUT          | /products/1                                          | { "name": "Test", "description": "High-performance shoe for experienced climbers.", "brand": "Scarpa", "level": "Advanced", "closing": "Velcro", "toepatch": true, "colors": ["red", "blue"], "images": ["https://example.com/image1.jpg", "https://example.com/image2.jpg"], "dateOfSale": "2024-10-01T12:00:00Z"}                 | 201                                                                       | 201                                                                       | Pass   |
| Update product with user token                           | PUT          | /products/1                                          | { "name": "Test", "description": "High-performance shoe for experienced climbers.", "brand": "Scarpa", "level": "Advanced", "closing": "Velcro", "toepatch": true, "colors": ["red", "blue"], "images": ["https://example.com/image1.jpg", "https://example.com/image2.jpg"], "dateOfSale": "2024-10-01T12:00:00Z"}                 | 401 Unauthorized                                                          | 401 Unauthorized                                                          | Pass   |

## Users
| Test Name                                     | Request Type | Request    | Body                                                                                              | Expected Response                                                                                   | Actual Response                                                                                     | Result |
|-----------------------------------------------|--------------|------------|---------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|--------|
| Get user by id                                | GET          | /users/1   | None                                                                                              | 200                                                                                                 | 200                                                                                                 | Pass   |
| Get non-existing by id                        | GET          | /users/100 | None                                                                                              | 404 User not found                                                                                  | 404 User not found                                                                                  | Pass   |
| Register a new user                           | POST         | /users     | {<br> "name": "John",<br> "email": "john.doe@example1.com",<br> "password": "StrongPass123!"<br>} | 201                                                                                                 | 201                                                                                                 | Pass   |
| Register a new user with missing fields       | POST         | /users     | {<br> "name": "",<br> "email": "john.doe@example2.com",<br> "password": "StrongPass123!"<br>}     | 400 Name must be at least 2 characters, only letters                                                | 400 Name must be at least 2 characters, only letters                                                | Pass   |
| Register a new user with invalid email format | POST         | /users     | {<br> "name": "John",<br> "email": "invalid-email",<br> "password": "StrongPass123!"<br>}         | 400 Invalid email format                                                                            | 400 Invalid email format                                                                            | Pass   |
| Register a new user with a weak password      | POST         | /users     | {<br> "name": "John",<br> "email": "john.doe@example.com",<br> "password": "weak"<br>}            | 400 Password must be at least 8 characters, contain one uppercase letter and one special character. | 400 Password must be at least 8 characters, contain one uppercase letter and one special character. | Pass   |
| Update user's name                            | PUT          | /users     | {<br> "name": "NewName"<br>}                                                                      | 200                                                                                                 | 200                                                                                                 | Pass   |
| Update user's email with invalid email format | PUT          | /users     | {<br> "email": "balls"<br>}                                                                       | 400 Invalid email format                                                                            | 400 Invalid email format                                                                            | Pass   |
| Update user's email and name                  | PUT          | /users     | {<br> "name": "NewName",<br> "email": "john.doe@example.com"<br>}                                 | 200                                                                                                 | 200                                                                                                 | Pass   |

## Auth
| Test Name                        | Request Type | Request        | Body                                                             | Expected Response                            | Actual Response                              | Result |
|----------------------------------|--------------|----------------|------------------------------------------------------------------|----------------------------------------------|----------------------------------------------|--------|
| Sign in with correct credentials | POST         | /auth/sessions | {<br> "email": "jan@gmail.com",<br> "password": "UserJan1!"<br>} | 200                                          | 200                                          | Pass   |
| Sign in with incorrect email     | POST         | /auth/sessions | {<br> "email": "ban@gmail.com",<br> "password": "UserJan1!"<br>} | 401 Invalid credentials                      | 401 Invalid credentials                      | Pass   |
| Sign in with incorrect password  | POST         | /auth/sessions | {<br> "email": "jan@gmail.com",<br> "password": "UserBan1!"<br>} | 401 Invalid credentials                      | 401 Invalid credentials                      | Pass   |
| Sign in with empty credentials   | POST         | /auth/sessions | None                                                             | 401 Invalid credentials                      | 401 Invalid credentials                      | Pass   |
| Log out with valid token         | DELETE       | /auth/sessions | None                                                             | 200 Logout successful, token invalidated     | 200 Logout successful, token invalidated     | Pass   |
| Log out without token            | DELETE       | /auth/sessions | None                                                             | 401 Authorization header is missing          | 401 Authorization header is missing          | Pass   |
| Log out with invalid token       | DELETE       | /auth/sessions | None                                                             | 400 Token does not contain user and or email | 400 Token does not contain user and or email | Pass   |
